(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{106:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-conponent"},[r("avatar",{attrs:{size:e.size,src:e.userPic}}),e._v(" "),r("div",{staticClass:"user-data"},[r("div",{staticClass:"username"},[e._v(e._s(e.name))]),e._v(" "),r("div",{staticClass:"occ"},[e._v(e._s(e.occ))])])],1)};i._withStripped=!0;var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"avatar-component",style:this.measures},[t("img",this._b({staticClass:"image",attrs:{alt:"user picture"}},"img",this.$attrs,!1))])};n._withStripped=!0;var s={props:{size:{type:Number,default:"3"}},computed:{measures:function(){var e=Number(this.size);return{width:"".concat(e,"rem"),height:"".concat(e,"rem")}}}},o=(r(81),r(17)),a=Object(o.a)(s,n,[],!1,null,"3142f16f",null);a.options.__file="src/admin/components/avatar/avatar.vue";var c=a.exports,u={props:{size:{type:Number,default:2.7},occ:String,name:String,photo:String},components:{avatar:c},computed:{userPic:function(){return this.photo?"https://webdev-api.loftschool.com/".concat(this.photo):r(82).default}}},v=(r(83),Object(o.a)(u,i,[],!1,null,null,null));v.options.__file="src/admin/components/user/user.vue";var l=v.exports},120:function(e,t,r){"use strict";var i=r(94);r.n(i).a},121:function(e,t,r){"use strict";var i=r(95);r.n(i).a},122:function(e,t,r){"use strict";var i=r(96);r.n(i).a},135:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return T}));var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reviews-page-component page-component"},[r("div",{staticClass:"page-content"},[r("div",{staticClass:"container"},[e._m(0),e._v(" "),r("transition",{attrs:{name:"form"}},[e.formVisible||0!==Object.keys(this.currentReview).length?r("div",{staticClass:"form"},[r("app-form",{attrs:{"form-name":e.formName,"edit-review-data":e.currentReview},on:{"hide-form":e.hideForm}})],1):e._e()]),e._v(" "),r("ul",{staticClass:"cards"},[r("li",{staticClass:"item"},[r("square-btn",{attrs:{type:"square",title:"Добавить отзыв"},on:{click:e.showForm}})],1),e._v(" "),e._l(e.reviews,(function(t){return r("li",{key:t.id,class:["item",{"edit-review":e.isCurrentReview(t)}]},[r("review-card",{attrs:{review:t},on:{"edit-review":function(r){return e.editReview(t)}}})],1)}))],2)],1)])])};i._withStripped=!0;var n=r(18),s=r.n(n),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-component"},[r("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[r("card",{attrs:{title:e.formName}},[r("div",{staticClass:"form-container",attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"form-cols"},[r("div",{staticClass:"form-col"},[r("label",[r("div",{class:["uploader",{active:e.preview},{hovered:e.hovered}],style:{backgroundImage:"url("+e.preview+")"},on:{dragover:e.handleDragOver,dragleave:function(t){e.hovered=!1},drop:e.handleChange}},[""===e.preview?r("div",{staticClass:"uploader-user-icon"}):e._e()]),e._v(" "),r("div",{staticClass:"uploader-btn"},[r("app-button",{attrs:{plain:"",title:"Добавить фото",typeAttr:"file"},on:{change:e.handleChange}})],1)])]),e._v(" "),r("div",{staticClass:"form-col from-col-text"},[r("div",{staticClass:"form-row"},[r("app-input",{attrs:{title:"Имя автора"},model:{value:e.newReview.author,callback:function(t){e.$set(e.newReview,"author",t)},expression:"newReview.author"}}),e._v(" "),r("app-input",{attrs:{title:"Титул автора"},model:{value:e.newReview.occ,callback:function(t){e.$set(e.newReview,"occ",t)},expression:"newReview.occ"}})],1),e._v(" "),r("div",{staticClass:"form-row"},[r("app-input",{attrs:{"field-type":"textarea",title:"Отзыв"},model:{value:e.newReview.text,callback:function(t){e.$set(e.newReview,"text",t)},expression:"newReview.text"}})],1)])]),e._v(" "),r("div",{staticClass:"form-btns"},[r("div",{staticClass:"btn"},[r("app-button",{attrs:{title:"Отмена",plain:""},on:{click:function(t){return t.preventDefault(),e.$emit("hide-form")}}})],1),e._v(" "),r("div",{staticClass:"btn"},[r("app-button",{attrs:{title:"Сохранить",typeAttr:"submit"}})],1)])])])],1)])};o._withStripped=!0;var a=r(0),c=r.n(a),u=r(1),v=r.n(u),l=r(76),p=r(70),f=r(71),w=r(107),d=r(6);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b={components:{card:l.a,appButton:p.a,appInput:f.default,tagsAdder:w.a},props:{editReviewData:Object,formName:String},data:function(){return{hovered:!1,preview:"",newReview:{author:"",occ:"",text:"",photo:{}}}},watch:{editReviewData:function(){this.newReview=m({},this.editReviewData),0!==Object.keys(this.newReview).length&&(this.preview="https://webdev-api.loftschool.com/".concat(this.newReview.photo))}},created:function(){this.newReview=m({},this.editReviewData),0!==Object.keys(this.newReview).length&&(this.preview="https://webdev-api.loftschool.com/".concat(this.newReview.photo))},methods:m(m({},Object(d.b)({addNewReview:"reviews/add",editReview:"reviews/edit",showTooltip:"tooltips/show"})),{},{handleSubmit:function(){var e=this;return v()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==Object.keys(e.editReviewData).length){t.next=12;break}return t.prev=1,t.next=4,e.addNewReview(e.newReview);case 4:e.showTooltip({text:"Отзыв успешно добавлен",type:"success"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.showTooltip({text:t.t0.message,type:"error"});case 10:t.next=21;break;case 12:return t.prev=12,t.next=15,e.editReview(e.newReview);case 15:e.showTooltip({text:"Отзыв успешно изменен",type:"success"}),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(12),e.showTooltip({text:t.t1.message,type:"error"});case 21:case"end":return t.stop()}}),t,null,[[1,7],[12,18]])})))()},handleDragOver:function(e){e.preventDefault(),this.hovered=!0},handleChange:function(e){e.preventDefault();var t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0];this.newReview.photo=t,this.renderPhoto(t),this.hovered=!1},renderPhoto:function(e){var t=this,r=new FileReader;r.readAsDataURL(e),r.onloadend=function(){t.preview=r.result}}})},O=(r(120),r(17)),g=Object(O.a)(b,o,[],!1,null,"31c69ce2",null);g.options.__file="src/admin/components/reviewsForm/reviewsForm.vue";var y=g.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("card",[r("div",{staticClass:"author",attrs:{slot:"title"},slot:"title"},[r("user",{attrs:{size:3,photo:e.review.photo,name:e.review.author,occ:e.review.occ}})],1),e._v(" "),r("div",{staticClass:"data",attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"text"},[r("p",[e._v(e._s(e.review.text))])]),e._v(" "),r("div",{staticClass:"btns"},[r("icon",{attrs:{symbol:"pencil",title:"Править"},on:{click:function(t){return e.$emit("edit-review")}}}),e._v(" "),r("icon",{attrs:{symbol:"trash",title:"Удалить"},on:{click:e.removeReview}})],1)])])};_._withStripped=!0;var j=r(106),R=r(78),C=r(108);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k={components:{card:l.a,icon:R.default,tagsList:C.a,user:j.a},props:{review:Object},computed:{cover:function(){return"https://webdev-api.loftschool.com/".concat(this.review.photo)}},methods:P(P({},Object(d.b)({removeReviewAction:"reviews/remove",showTooltip:"tooltips/show"})),{},{removeReview:function(){var e=this;return v()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.removeReviewAction(e.review.id);case 3:e.showTooltip({text:"Отзыв успешно удален",type:"success"}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.showTooltip({text:t.t0.message,type:"error"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}})},D=(r(121),Object(O.a)(k,_,[],!1,null,"7b932b0f",null));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}D.options.__file="src/admin/components/reviewCard/reviewCard.vue";var $={components:{appForm:y,reviewCard:D.exports,squareBtn:p.a},data:function(){return{formVisible:!1,currentReview:{},formName:"Новый отзыв"}},computed:E({},Object(d.c)("reviews",{reviews:function(e){return e.data}})),methods:E(E({},Object(d.b)({fetchReviews:"reviews/fetch"})),{},{showForm:function(){this.formVisible=!this.formVisible},hideForm:function(){this.formVisible=!1,this.currentReview={},this.formName="Новый отзыв"},editReview:function(e){this.currentReview=e,this.formName="Редактирование отзыва"},isCurrentReview:function(e){return e.id===this.currentReview.id}}),mounted:function(){this.fetchReviews()}},N=(r(122),Object(O.a)($,i,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-header"},[t("div",{staticClass:"page-title"},[this._v('\n            Блок "Отзывы"\n          ')])])}],!1,null,"2c7c3bd3",null));N.options.__file="src/admin/pages/reviews/reviews.vue";var T=N.exports},72:function(e,t,r){},73:function(e,t,r){},81:function(e,t,r){"use strict";var i=r(72);r.n(i).a},82:function(e,t,r){"use strict";r.r(t),t.default=r.p+"634044b8b49aa1daec0aa6e06a39f165.jpg"},83:function(e,t,r){"use strict";var i=r(73);r.n(i).a},94:function(e,t,r){},95:function(e,t,r){},96:function(e,t,r){}}]);